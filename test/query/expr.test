#

open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }]
connect E0 S0 localhost:3485

# test: consts

# int
select 0
select 1234
select 123456789
select 123456789012345

select -20

select length(0)

# real
select 1.0
select 1.1234

# flt_min
select 1.17549e-38

# flt_max
select 3.40282e+38

# dbl_min
select 2.2250738585072014e-308

# dbl_max
select 1.79769e+308

select 1e1
select 1e2
select 1e4
select 1e8
select 1e40

# string
select "hello world"
select ""
select length("hello world")
select length("")

select "hello world"::length
select "hello world"::length()

# bool
select true
select false

# null
select null

# misc
select name
select path.to.name
select *

# arguments
#select $0
#select $9999
#select $name

# test: basic operations

# +, -, ||
select 0 + 0
select 2 + 2
select 32 - 2
select "a" + 0
select 0 + "a"
select 0 || 0

# *, /, %
select 2 * 2
select 8 * 8
select 64 / ( 4 + 4 )
select 64 / 0
select 64 % 0

# |, #, &, <<, >>, ~
select 60 & 13
select 60 | 13
select 60 ^ 13
select 60 << 2
select 60 >> 2
select ~10

select 1 | 2
select 3 & ~1

# gt, gte, lt, lte
select 0 > 0
select 0 >= 0
select 0 < 0
select 0 <= 0

select "a" < 0
select "a" < "b"
select "a" < "a"
select "a" <= "a"

select "a" > "b"
select "a" > "a"
select "a" >= "a"

# between
select 1 between
select 1 between and
select 1 between 0
select 1 between 0 1
select 1 between 0 or
select 1 between 0 and
select 1 between 0 and 0

select 1 between 0 and 1
select 1 between 1 and 1
select 1 between 1 and 0
select 0.052 between 0.010 and 0.053

# not between
select 0.058 between 0.010 and 0.053
explain select 0.058 between 0.010 and 0.053

select 0.058 not between 0.010 and 0.053
explain select 0.058 not between 0.010 and 0.053

# - expr
select -20
select - "test"

# not expr
select not 20
select not "test"

# eq, neq
select 1 = 1
select 1 <> 1
select "a" = "a"
select "a" <> "a"
select "a" = "b"
select "a" <> "b"
select [] = []
select {} = {}
select null = null
select null <> null

# is
select 1 is
select is
select 1 is null
select 1 is not null
select true is null
select [] is null
select [] is not null

select null is not null
select null is null

# or, and
select 0 and 0
select 0 and 1
select 1 and 0
select 1 and 1
select "a" and "b"
select "a" and not "b"
select not 0 and not 0

select 0 or 0
select 0 or 1
select 1 or 0
select 1 or 1
select "a" or "b"
select "a" or not "b"
select not 0 or not 0

# string
select "a" + "b"
select "a" || "b"
select "a"[0]
select "\"Hello World\""

# real operations
select 1.1 + 1.1
select 1.2 - 1.1
select 1.1234 - 1.12
select 1 + 1.1
select 1.1 + 1
select 1 - 1.1
select 1.1 - 1
select 12 * 1.4
select 1.4 * 12
select 12 / 1.4
select 1.4 / 12.0
select 12.2 * 1.4
select 12.4 / 1.4
select 1.0 >= 1.0
select 1.0 >= 1.1
select 1 >= 1.1
select 1.0 > 1.0
select 1.1 > 1.0
select 2.8 < 3.4
select -7.6
select -7.6 + 1
select 1.1 and 0.0
select 1.1 or 0.0
select not 2.8

select 2.8 & 3.4

# objects

# expr[expr]
select 0[0]
select name[0]

# test: array
select []
select [0, 1, 2]
select [0, [1, 2], 3]

select [][0]
select [0, 1, 2][0]
select [0, 1, 2][1]
select [0, 1, 2][2]
select [0, 1, 2][3]

select [0, [1, 2], 3][1]

select length([])
select length([0, [1, 2], 3])

select []::length
select [0, [1, 2], 3]::length

select [{}]

# test: object
select {}
select {"a"}
select {"a": 0}
select {"a": 0, "b"}
select {"a": 0, "b": 1}

select {"a": 123}.a
select {"a": 123}["a"]
select {"a": {"b": 777}}.a.b
select {"a": {"b": 777}}["a.b"]
select {"a": {"b": 777}}["a" || "." || "b"]
select {"a": {"b": 777}}::length()

disconnect S0
close E0
