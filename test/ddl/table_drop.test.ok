open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }]
connect E0 S0 localhost:3485
# test: drop table statement parsing
drop
{"msg": "DROP <USER|REPLICA|NODE|SCHEMA|TABLE|INDEX|VIEW> expected"}
drop 1
{"msg": "DROP <USER|REPLICA|NODE|SCHEMA|TABLE|INDEX|VIEW> expected"}
drop table "name"
{"msg": "DROP TABLE <name> expected"}
drop table name junk
{"msg": "unexpected token at the end of statement"}
# test: drop non-existing table
drop table name
{"msg": "table 'name': not exists"}
drop table if exists test
# test: drop table
create table test(id int primary key)
select system.tables().'public.test'.name
["test"]
drop table test
select system.tables().'public.test'.name
{"msg": "[]: object key 'public.test' not found"}
# test: drop table if exists
create table test(id int primary key)
select system.tables().'public.test'.name
["test"]
drop table test
select system.tables().'public.test'.name
{"msg": "[]: object key 'public.test' not found"}
drop table if exists test
drop table if exists test.test
# test: recreate same table after drop
create table test (id int primary key)
select system.tables().'public.test'.name
["test"]
drop table test
create table test (id int primary key)
select system.tables().'public.test'.name
["test"]
drop table test
# test: drop table schema
create schema test
create table test.test (id int primary key)
select system.tables().'test.test'.schema
["test"]
select system.tables().'test.test'.name
["test"]
drop table test
{"msg": "table 'test': not exists"}
drop table test.test
drop schema test
select system.tables().'test.test'.schema
{"msg": "[]: object key 'test.test' not found"}
select system.tables().'test.test'.name
{"msg": "[]: object key 'test.test' not found"}
disconnect S0
close E0
