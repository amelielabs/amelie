open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }]
connect E0 S0 localhost:3485
# test: vector create
select [1,2,3]::vector
[1, 2, 3]
select [1,2,3]::vector::type
"vector"
select [1,2,3]::vector::length
3
select ""::vector
{"code": 1, "msg": "vector(): expected array for argument 0, but got string"}
select [1.0]::vector
[1]
select [1.0, 1.1, 1.2]::vector
[1, 1.1, 1.2]
select []::vector
[]
select []::vector::length
0
# test: vector at
select [1.0, 1.1, 1.2]::vector[0]
1
select [1.0, 1.1, 1.2]::vector[1]
1.1
select [1.0, 1.1, 1.2]::vector[2]
1.2
select [1.0, 1.1, 1.2]::vector[3]
{"code": 1, "msg": "[]: vector index  is out of bounds"}
select [1.0, 1.1, 1.2]::vector[-10]
{"code": 1, "msg": "[]: vector index  is out of bounds"}
# test: vector eq
select [1.0, 1.1]::vector = [1.0, 1.1]::vector
true
select [1.0, 1.1]::vector <> [1.0, 1.1]::vector
false
select [1.0, 1.1]::vector = [1.0, 1.0]::vector
false
select [1.0, 1.1]::vector <> [1.0, 1.0]::vector
true
select [1.0, 1.1]::vector = [1.0]::vector
false
select [1.0, 1.1]::vector = []::vector
false
select []::vector = []::vector
true
# test: vector lt
select [1.0, 1.1]::vector < [1.0, 1.1]::vector
false
select [1.0, 1.1]::vector < [1.0, 1.2]::vector
true
select [1.0, 1.1]::vector < [1.0]::vector
false
# test: vector lte
select [1.0, 1.1]::vector <= [1.0, 1.1]::vector
true
select [1.0, 1.1]::vector <= [1.0, 1.2]::vector
true
select [1.0, 1.3]::vector <= [1.0, 1.2]::vector
false
# test: vector gt
select [1.0, 1.1]::vector > [1.0, 1.1]::vector
false
select [1.0, 1.2]::vector > [1.0, 1.1]::vector
true
select [1.0, 1.1]::vector > [1.0]::vector
true
# test: vector gte
select [1.0, 1.1]::vector >= [1.0, 1.1]::vector
true
select [1.0, 1.2]::vector >= [1.0, 1.1]::vector
true
select [1.0, 1.1]::vector >= [1.0]::vector
true
# test: vector add
select [1.0, 2.1, 3]::vector + [1, 1, 1]::vector
[2, 3.1, 4]
select [1.0, 2.1, 3]::vector + [1, 1]::vector
{"code": 1, "msg": "vector sizes mismatch"}
# test: vector sub
select [1.0, 2.1, 3]::vector - [1, 1, 1]::vector
[0, 1.1, 2]
select [1.0, 2.1, 3]::vector - [1, 1]::vector
{"code": 1, "msg": "vector sizes mismatch"}
# test: vector mul
select [1.0, 2.1, 3]::vector * [1.5, 1.5, 1.5]::vector
[1.5, 3.15, 4.5]
select [1.0, 2.1, 3]::vector * [1.5, 1.5]::vector
{"code": 1, "msg": "vector sizes mismatch"}
# test: vector column
create table test (id int primary key, vec vector)
[]
insert into test values (0, [])
{"code": 1, "msg": "column vec: does not match data type vector"}
insert into test values (0, vector [])
[]
insert into test values (1, vector [1.0])
[]
insert into test values (2, vector [1])
[]
insert into test values (3, vector [1.0, 1.1,])
[]
insert into test values (4, vector [1.0,)
{"code": 1, "msg": "VECTOR integer of real value expected"}
insert into test values (5, vector [1.0,])
[]
insert into test values (6, vector [1.0, 1.1])
[]
insert into test values (7, vector [1.0, 1.1, -2.2, -8])
[]
select * from test
[[0, []], [1, [1]], [2, [1]], [3, [1, 1.1]], [5, [1]], [6, [1, 1.1]], [7, [1, 1.1, -2.2, -8]]]
select vec::type from test
["vector", "vector", "vector", "vector", "vector", "vector", "vector"]
drop table test
[]
disconnect S0
close E0
