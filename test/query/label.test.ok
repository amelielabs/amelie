open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }]
connect E0 S0 localhost:3485
create shared table test (id int primary key, data int default 1)
insert into test (id) values (1), (2), (3)
# test: select label
select 1 name
[1]
# test: select as label
select 1 AS name
[1]
# test: select from expr having label
select * name from [1,2,3] group by *
[1, 2, 3]
select * name from [1,2,3] group by * having name > 1
[2, 3]
# test: select from shared having label
select id z from test group by id having z > 1
[2, 3]
select id z from test group by id having id > 1
[2, 3]
# test: select from shared having label aggr
select id, count(*) as z from test group by id having z >= 1
[[1, 1], [2, 1], [3, 1]]
select id, count(*) as z from test group by id having z > 1
[]
select id from test group by id having count(*) >= 1
[1, 2, 3]
# test: select from shared group by label
select z from test group by id z having z >= 1
[1, 2, 3]
select * from test group by id z having z >= 1
[1, 2, 3]
# test: select from shared group by as label
select z from test group by id as z having z >= 1
[1, 2, 3]
select * from test group by id as z having z >= 1
[1, 2, 3]
# test: select from (select from shared) label
select * from (select * from test)
[[1, 1], [2, 1], [3, 1]]
select t.* from (select * from test) t
[[1, 1], [2, 1], [3, 1]]
# test: select from (select label from shared) label
select t.id from (select * as id from test) t
[1, 2, 3]
select t.id from (select * id from test) t
[1, 2, 3]
select t.id from (select * from test) t
{"msg": "column id: row or object expected, but got array"}
# test: select from (select {} from shared) label
select t.id from (select {"id": id} from test) t
[1, 2, 3]
drop table test
disconnect S0
close E0
