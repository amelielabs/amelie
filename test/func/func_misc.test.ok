open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }]
connect E0 S0 localhost:3485
# test: error
select error("error test")
{"code": 1, "msg": "error test"}
# test: type
select 1::type
["int"]
select "Hi"::type
["string"]
select [1,2,3]::type
["array"]
select {}::type
["map"]
select (select * from [1,2,3])::type
["set"]
# test: random
select random()::type
["int"]
select public.random()::type
["int"]
# test: random uuid
select random_uuid()::size
[36]
# test: md5
select md5("hello world")
["5eb63bbbe01eeed093cb22bb8f5acdc3"]
# test: sha1
select sha1("hello world")
["2aae6c35c94fcfb415dbe95f408b9ce91ee846ed"]
# test: base64
select "hello world"::encode("base64")
["aGVsbG8gd29ybGQ="]
select "hello world"::encode("base64")::decode("base64")
["hello world"]
select "{\"alg\":\"HS256\",\"typ\":\"JWT\"}"::encode("base64");
["eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"]
select decode("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9", "base64")
["{\"alg\":\"HS256\",\"typ\":\"JWT\"}"]
select "{\"sub\":\"123456\",\"name\":\"test\",\"iat\":1516239022}"::encode("base64")
["eyJzdWIiOiIxMjM0NTYiLCJuYW1lIjoidGVzdCIsImlhdCI6MTUxNjIzOTAyMn0="]
select "{\"sub\":\"123456\",\"name\":\"test\",\"iat\":1516239022}"::encode("base64")::decode("base64")
["{\"sub\":\"123456\",\"name\":\"test\",\"iat\":1516239022}"]
select "eyJzdWIiOiIxMjM0NTYiLCJuYW1lIjoidGVzdCIsImlhdCI6MTUxNjIzOTAyMn0"::decode("base64")
["{\"sub\":\"123456\",\"name\":\"test\",\"iat\":1516239022}"]
select system.config()::string::encode("base64")::decode("base64") = system.config()::string
[true]
# test: serial
select serial("public", "abc")
{"code": 1, "msg": "table 'abc': not exists"}
create table test (id int primary key serial)
[]
insert into test () values (), (), ()
[]
select serial("public", "test")
[3]
drop table test
[]
disconnect S0
close E0
