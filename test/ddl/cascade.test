#

open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }]
connect E0 S0 localhost:3485

# test: drop schema with dependency
create schema test
create table test.a(id int primary key)
create table test.b(id int primary key)
drop schema test
select system.tables().'test.a'.name
select system.tables().'test.b'.name

create view test.test_view as select 1
select system.views()

# test: drop schema cascade
drop schema test cascade
select system.schemas()

# test: drop schema cascade (tables)
select system.tables().'test.a'.name
select system.tables().'test.b'.name

# test: drop schema cascade (views)
select system.views()

create schema test
create table test.a(id int primary key)
create table test.b(id int primary key)
drop schema test cascade
select system.tables().'test.a'.name
select system.tables().'test.b'.name

# test: alter schema rename
create schema test

create table test.a(id int primary key)
create table test.b(id int primary key)
select system.schemas()
select system.tables().'test.a'.name
select system.tables().'test.b'.name

alter schema test rename test2
select system.schemas()
select system.tables().'test2.a'.name
select system.tables().'test2.b'.name

disconnect S0
close E0
