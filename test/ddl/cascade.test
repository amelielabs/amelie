#

env_open E0
connect E0 S0

# test: drop schema with dependency
create schema test
create table test.a(id int primary key)
create table test.b(id int primary key)
drop schema test
select *.schema, *.name from mn_tables()

# test: drop schema cascade
drop schema test cascade
select * from mn_schemas()
select *.schema, *.name from mn_tables()

create schema test
create table test.a(id int primary key)
create table test.b(id int primary key)
drop schema test cascade
select *.schema, *.name from mn_tables()

# test: alter schema rename
create schema test

create table test.a(id int primary key)
create table test.b(id int primary key)
select * from mn_schemas()
select *.schema, *.name from mn_tables()

alter schema test rename test2
select * from mn_schemas()
select *.schema, *.name from mn_tables()

disconnect S0
env_close E0
