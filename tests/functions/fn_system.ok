open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }];
connect E0 S0 127.0.0.1:3485;
# test: config
select show();
[{
  "uuid": "00000000-0000-0000-0000-000000000000",
  "timezone": "UTC",
  "format": "pretty-minimal",
  "log_enable": true,
  "log_to_file": true,
  "log_to_stdout": false,
  "log_connections": true,
  "log_options": true,
  "tls_capath": "",
  "tls_ca": "",
  "tls_cert": "",
  "tls_key": "",
  "listen": [{
    "host": "127.0.0.1",
    "port": 3485
  }],
  "limit_send": 3145728,
  "limit_recv": 1048576,
  "limit_write": 0,
  "frontends": 1,
  "backends": 1,
  "jobs": 3,
  "cpu_affinity": true,
  "wal_worker": false,
  "wal_crc": true,
  "wal_sync_on_create": false,
  "wal_sync_on_close": false,
  "wal_sync_on_write": false,
  "wal_sync_interval": "1 sec",
  "wal_size": 67108864,
  "wal_truncate": 0,
  "storage_crc": true,
  "storage_sync": false,
  "catalog_sync": false,
  "checkpoint_interval": "5 min",
  "repl_readahead": 262144,
  "repl_reconnect_ms": 3000
}]
select show('config');
[{
  "uuid": "00000000-0000-0000-0000-000000000000",
  "timezone": "UTC",
  "format": "pretty-minimal",
  "log_enable": true,
  "log_to_file": true,
  "log_to_stdout": false,
  "log_connections": true,
  "log_options": true,
  "tls_capath": "",
  "tls_ca": "",
  "tls_cert": "",
  "tls_key": "",
  "listen": [{
    "host": "127.0.0.1",
    "port": 3485
  }],
  "limit_send": 3145728,
  "limit_recv": 1048576,
  "limit_write": 0,
  "frontends": 1,
  "backends": 1,
  "jobs": 3,
  "cpu_affinity": true,
  "wal_worker": false,
  "wal_crc": true,
  "wal_sync_on_create": false,
  "wal_sync_on_close": false,
  "wal_sync_on_write": false,
  "wal_sync_interval": "1 sec",
  "wal_size": 67108864,
  "wal_truncate": 0,
  "storage_crc": true,
  "storage_sync": false,
  "catalog_sync": false,
  "checkpoint_interval": "5 min",
  "repl_readahead": 262144,
  "repl_reconnect_ms": 3000
}]
select show('all');
[{
  "uuid": "00000000-0000-0000-0000-000000000000",
  "timezone": "UTC",
  "format": "pretty-minimal",
  "log_enable": true,
  "log_to_file": true,
  "log_to_stdout": false,
  "log_connections": true,
  "log_options": true,
  "tls_capath": "",
  "tls_ca": "",
  "tls_cert": "",
  "tls_key": "",
  "listen": [{
    "host": "127.0.0.1",
    "port": 3485
  }],
  "limit_send": 3145728,
  "limit_recv": 1048576,
  "limit_write": 0,
  "frontends": 1,
  "backends": 1,
  "jobs": 3,
  "cpu_affinity": true,
  "wal_worker": false,
  "wal_crc": true,
  "wal_sync_on_create": false,
  "wal_sync_on_close": false,
  "wal_sync_on_write": false,
  "wal_sync_interval": "1 sec",
  "wal_size": 67108864,
  "wal_truncate": 0,
  "storage_crc": true,
  "storage_sync": false,
  "catalog_sync": false,
  "checkpoint_interval": "5 min",
  "repl_readahead": 262144,
  "repl_reconnect_ms": 3000
}]
# test: state
select show('state');
[{
  "version": "0.9.0",
  "directory": "_output/E0",
  "uuid": "00000000-0000-0000-0000-000000000000",
  "frontends": 1,
  "backends": 1,
  "lsn": 1,
  "psn": 0,
  "catalog": 0,
  "catalog_pending": 0,
  "read_only": false
}]
# test: users
select show('users');
[[]]
# test: user
select show('user', 'test');
[null]
# test: replicas
select show('replicas');
[[]]
# test: replica
select show('replica', '00000000-0000-0000-0000-000000000000');
[null]
select show('replica', uuid '00000000-0000-0000-0000-000000000000');
{"msg": "show(string, ❰uuid❱ ⟵ string or bool expected"}
# test: repl
select show('repl');
[{
  "active": false,
  "role": "primary",
  "primary": null,
  "replicas": []
}]
# test: replication
select show('replication');
[{
  "active": false,
  "role": "primary",
  "primary": null,
  "replicas": []
}]
# test: storages
select show('storages');
[[{
  "name": "main",
  "path": "main"
}]]
# test: storage
select show('storage', 'main');
[{
  "name": "main",
  "path": "main"
}]
# test: databases
select show('databases');
[[{
  "name": "main"
}]]
# test: database
select show('database', 'main');
[{
  "name": "main"
}]
create table test (id int primary key);
# test: tables
select show('tables');
[[{
  "db": "main",
  "name": "test"
}]]
# test: table
select show('table', 'test');
[{
  "db": "main",
  "name": "test"
}]
# test: indexes
select show('indexes', '', 'test', false);
[[{
  "name": "primary",
  "type": 2,
  "unique": true,
  "primary": true,
  "keys": [{
    "column": 0,
    "asc": true
  }]
}]]
# test: index
select show('index', 'primary', 'test', false);
[{
  "name": "primary",
  "type": 2,
  "unique": true,
  "primary": true,
  "keys": [{
    "column": 0,
    "asc": true
  }]
}]
# test: tiers
select show('tiers', '', 'test', false)[0].name;
["main"]
# test: tier
select show('tier', 'main', 'test', false).name;
["main"]
# test: partitions
select show('partitions', '', 'test', false);
[[{
  "id": 1,
  "tier": "main",
  "storage": "main",
  "ram": true,
  "min": 0,
  "max": 8096,
  "lsn": 0,
  "size": 0,
  "compression": 1
}]]
# test: partition
select show('partition', '0', 'test', false);
[null]
# test: functions
select show('functions');
[[]]
# test: function
select show('function', 'test');
[null]
# test: wal
select show('wal');
[{
  "lsn": 2,
  "lsn_min": 1,
  "files": 1,
  "slots": 0,
  "slots_min": -1,
  "writes": 1,
  "writes_bytes": 438,
  "ops": 1
}]
# test: metrics
select show('metrics')::size;
[9]
disconnect S0;
close E0;
