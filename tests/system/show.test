#

open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }];
connect E0 S0 127.0.0.1:3485;

# test: show statement parsing
show;
show all junk;
show 1234;

# test: show users
create user test;
show users abc;
show users;

prefer return=json;
show users;
prefer;

# test: show user
show user;
show user unknown;
show user test;
show user test;

prefer return=json;
show user test;
prefer;

# test: show schemas
create schema test;
show schemas;
show schema test;

prefer return=json;
show schema test;
prefer;

# test: show tables
create table test (id int primary key);
show tables;

# test: show table
show table;
show table test;

prefer return=json;
show table test;
prefer;

# test: show functions
create function test_fn (id int) return json
begin
	return {
		"a": 2 + 2,
		"b": id
	};
end;
select test_fn(123);
select test_fn(123).a;
select 123::test_fn().a;
show functions;
show functions extended;

# test: show function;
show function;
show function test_fn;
show function test_fn extended;

# test: show wal
show wal;

# test: show replicas
show replicas;

# test: show replica
show replica abc;
show replica 'abc';
show replica '00000000-0000-0000-0000-000000000000';

# test: show state
select system.state();
select system.state().directory;
select system.state()["directory"];
select system.state(123);

# test: show config
show config;

# test: show all
show all;

select system.config().uuid;
select system.config(123);

# test: show name
show log_enable;
show "log_enable";

# test: show unknown
show asdf;

# test: explain show
explain show log_enable;

# test: show (local shadow)
prefer timezone=Asia/Tokyo, return=json;
show all;
show timezone;
prefer;
show all;
show timezone;

disconnect S0;
close E0;
