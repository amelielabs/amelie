open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }];
connect E0 S0 127.0.0.1:3485;
# test: method not exist
select 1 :: name();
{"msg": "select 1 :: ❰name❱ ⟵ function not found"}
# test: expr :: method()
select 1::;
{"msg": "select 1::❰;❱ ⟵ function name expected"}
select 1::();
{"msg": "select 1::❰(❱ ⟵ function name expected"}
select 1::[]();
{"msg": "select 1::❰[❱ ⟵ function name expected"}
select 1::length();
{"msg": "length(❰int❱ ⟵ unsupported argument type"}
select "hello"::length();
[5]
explain select show('state').directory::length();
[{
  "main": {
    "00": "push_string         0      0      0     # state",
    "01": "call                0      -      1     # show()",
    "02": "string              1      6      0     # directory",
    "03": "dotjs               2      0      1     ",
    "04": "push                2      0      0     ",
    "05": "call                0      -      1     # length()",
    "06": "ret                 0      0      -     "
  },
  "access": []
}]
select show('state').directory::length();
[10]
select show('state').directory;
["_output/E0"]
select [null]::put(0, 123);
[[123]]
select put([null], 0, 123);
[[123]]
# test: expr :: method() :: method()
select [1]::append(1)::append(2);
[[1, 1, 2]]
select [1]::append(1)::append(2)::append(3);
[[1, 1, 2, 3]]
select {}::set("a", 1)::set("b", 2);
[{
  "a": 1,
  "b": 2
}]
select {}::set("a", 1)::set("b", 2);
[{
  "a": 1,
  "b": 2
}]
# test: expr :: method
explain select show('state').directory::length;
[{
  "main": {
    "00": "push_string         0      0      0     # state",
    "01": "call                0      -      1     # show()",
    "02": "string              1      6      0     # directory",
    "03": "dotjs               2      0      1     ",
    "04": "push                2      0      0     ",
    "05": "call                0      -      1     # length()",
    "06": "ret                 0      0      -     "
  },
  "access": []
}]
select show('state').directory::length;
[10]
select length(show('state').directory);
[10]
disconnect S0;
close E0;
