env_open E0 "uuid": "00000000-0000-0000-0000-000000000000"
connect E0 S0
connect: on_connect
# test: set statement parsing
set
query: on_error
{"code": 1, "msg": "SET <name> expected"}
set name
query: on_error
{"code": 1, "msg": "SET name <TO> expected"}
set "log_enable"
query: on_error
{"code": 1, "msg": "SET <name> expected"}
set log_enable
query: on_error
{"code": 1, "msg": "SET name <TO> expected"}
set log_enable to
query: on_error
{"code": 1, "msg": "SET name TO <value> expected string or int"}
set log_enable to 0
query: on_error
{"code": 1, "msg": "SET 'log_enable': variable is read-only"}
set query_dump to 0 junk
query: on_error
{"code": 1, "msg": "unexpected clause at the end of command"}
# test: set read-only
set log_enable to 0 # ro
query: on_error
{"code": 1, "msg": "SET 'log_enable': variable is read-only"}
# test: set int
show test_int
0
set test_int to "test"
query: on_error
{"code": 1, "msg": "SET 'test_int': integer value expected"}
show test_int
0
set test_int to 1234
show test_int
1234
set test_int to -1
query: on_error
{"code": 1, "msg": "SET name TO <value> expected string or int"}
show test_int
1234
set test_int to 2147483647
show test_int
2147483647
set test_int to 4294967295
show test_int
4294967295
set test_int to 9223372036854775807
show test_int
9223372036854775807
set test_int to 18446744073709551615
show test_int
-1
set test_int to 18446744073709551616
show test_int
0
# test: set string
show test_string
""
set test_string to 1234
query: on_error
{"code": 1, "msg": "SET 'test_string': string value expected"}
show test_string
""
set test_string to "hello"
show test_string
"hello"
set test_string to ""
show test_string
""
set test_string to "world"
show test_string
"world"
# test: set data
show test_data
null
set test_data to 1234
query: on_error
{"code": 1, "msg": "SET 'test_data': variable cannot be changed"}
show test_data
null
disconnect S0
env_close E0
