env_open E0 "uuid": "00000000-0000-0000-0000-000000000000"
connect E0 S0
connect: on_connect
# test: show statement parsing
show
query: on_error
{"code": 1, "msg": "SHOW <name> expected"}
show;
query: on_error
{"code": 1, "msg": "SHOW <name> expected"}
show all junk
query: on_error
{"code": 1, "msg": "unexpected clause at the end of command"}
show 1234
query: on_error
{"code": 1, "msg": "SHOW <name> expected"}
# test: show users
show users
[]
select system.users()
[]
# test: show schemas
show schemas
[{"name": "system", "system": true, "create": false}, {"name": "public", "system": true, "create": true}]
select system.schemas()
[{"name": "system", "system": true, "create": false}, {"name": "public", "system": true, "create": true}]
# test: show functions
show functions
[{"schema": "public", "name": "has", "argc": 2}, {"schema": "public", "name": "set", "argc": 3}, {"schema": "public", "name": "unset", "argc": 2}, {"schema": "public", "name": "sizeof", "argc": 1}, {"schema": "public", "name": "string", "argc": 1}, {"schema": "public", "name": "json", "argc": 1}, {"schema": "system", "name": "config", "argc": 0}, {"schema": "system", "name": "users", "argc": 0}, {"schema": "system", "name": "schemas", "argc": 0}, {"schema": "system", "name": "functions", "argc": 0}, {"schema": "system", "name": "tables", "argc": 0}, {"schema": "system", "name": "views", "argc": 0}, {"schema": "system", "name": "partitions", "argc": 0}, {"schema": "system", "name": "wal", "argc": 0}, {"schema": "system", "name": "debug", "argc": 0}]
select system.functions()
[{"schema": "public", "name": "has", "argc": 2}, {"schema": "public", "name": "set", "argc": 3}, {"schema": "public", "name": "unset", "argc": 2}, {"schema": "public", "name": "sizeof", "argc": 1}, {"schema": "public", "name": "string", "argc": 1}, {"schema": "public", "name": "json", "argc": 1}, {"schema": "system", "name": "config", "argc": 0}, {"schema": "system", "name": "users", "argc": 0}, {"schema": "system", "name": "schemas", "argc": 0}, {"schema": "system", "name": "functions", "argc": 0}, {"schema": "system", "name": "tables", "argc": 0}, {"schema": "system", "name": "views", "argc": 0}, {"schema": "system", "name": "partitions", "argc": 0}, {"schema": "system", "name": "wal", "argc": 0}, {"schema": "system", "name": "debug", "argc": 0}]
# test: show tables
show tables
[]
select system.tables()
[]
# test: show views
show views
[]
select system.views()
[]
# test: show partitions
show partitions
[]
select system.partitions()
[]
# test: show wal
show wal
{"lsn": 0, "file_count": 1, "file_min": 1, "snapshot_count": 0, "snapshot_min": -1}
select system.wal()
{"lsn": 0, "file_count": 1, "file_min": 1, "snapshot_count": 0, "snapshot_min": -1}
# test: show all
show all
{"version": "0.0", "uuid": "00000000-0000-0000-0000-000000000000", "directory": "_output/E0", "backup": "", "log_enable": true, "log_to_file": true, "log_to_stdout": false, "log_connections": true, "log_query": false, "tls_cert": "", "tls_key": "", "tls_ca": "", "listen": null, "wal_rotate_wm": 10485760, "wal_sync_on_rotate": false, "wal_sync_on_write": false, "repl_enable": false, "repl_reconnect_ms": 3000, "repl_primary": "", "repl_role": "primary", "cluster_hubs": 1, "cluster_shards": 1, "lsn": 0, "read_only": false}
select system.config()
{"version": "0.0", "uuid": "00000000-0000-0000-0000-000000000000", "directory": "_output/E0", "backup": "", "log_enable": true, "log_to_file": true, "log_to_stdout": false, "log_connections": true, "log_query": false, "tls_cert": "", "tls_key": "", "tls_ca": "", "listen": null, "wal_rotate_wm": 10485760, "wal_sync_on_rotate": false, "wal_sync_on_write": false, "repl_enable": false, "repl_reconnect_ms": 3000, "repl_primary": "", "repl_role": "primary", "cluster_hubs": 1, "cluster_shards": 1, "lsn": 0, "read_only": false}
select system.config().directory
"_output/E0"
select system.config()["directory"]
"_output/E0"
select system.config(123)
query: on_error
{"code": 1, "msg": "config(): incorrect number of arguments"}
# test: show name
show log_enable
true
show "log_enable"
query: on_error
{"code": 1, "msg": "SHOW <name> expected"}
disconnect S0
env_close E0
