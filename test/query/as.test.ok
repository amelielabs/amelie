open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }]
connect E0 S0 localhost:3485
create shared table test (id int primary key, data int default 1)
insert into test (id) values (1), (2), (3)
# test: select label
select 1 name
[1]
# test: select as label
select 1 AS name
[1]
# test: select column as from
create table test (id int primary key)
{"msg": "table 'test': already exists"}
select id as x from test
[1, 2, 3]
select id x from test
[1, 2, 3]
# test: select from (select column as from)
select t.id from (select id from test) t
[1, 2, 3]
select t.x from (select id as x from test) t
[1, 2, 3]
select t.x from (select z.id as x from (select id from test) z) t
[1, 2, 3]
explain select t.x from (select z.id as x from (select id from test) z) t
[{
  "bytecode": {
    "coordinator": {
      "00": "send_first          0      0      0     ",
      "01": "recv                0      0      0     ",
      "02": "bool                0      0      0     ",
      "03": "push                0      0      0     ",
      "04": "union_recv          0      -1     -1    ",
      "05": "cte_set             0      0      0     ",
      "06": "set                 0      1      0     ",
      "07": "cte_get             1      0      0     ",
      "08": "store_open          0      1      10    ",
      "09": "jmp                 14     0      0     ",
      "10": "store_read          2      0      0     ",
      "11": "push                2      0      0     ",
      "12": "set_add             0      0      0     ",
      "13": "store_next          0      10     0     ",
      "14": "store_close         0      1      0     ",
      "15": "cte_set             1      0      0     ",
      "16": "set                 0      1      0     ",
      "17": "cte_get             2      1      0     ",
      "18": "store_open          0      2      20    ",
      "19": "jmp                 24     0      0     ",
      "20": "store_read          3      0      0     ",
      "21": "push                3      0      0     ",
      "22": "set_add             0      0      0     ",
      "23": "store_next          0      20     0     ",
      "24": "store_close         0      1      0     ",
      "25": "cte_set             2      0      0     ",
      "26": "content             2      -      -     ",
      "27": "ret                 0      0      0     "
    },
    "node": {
      "00": "set                 0      1      0     ",
      "01": "table_open          0      0      3     # public.test (primary)",
      "02": "jmp                 7      0      0     ",
      "03": "table_readi32       1      0      0     ",
      "04": "push                1      0      0     ",
      "05": "set_add             0      0      0     ",
      "06": "table_next          0      3      0     ",
      "07": "table_close         0      0      0     ",
      "08": "result              0      0      0     ",
      "09": "ret                 0      0      0     "
    }
  }
}]
drop table test
disconnect S0
close E0
