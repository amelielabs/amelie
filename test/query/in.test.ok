open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }]
connect E0 S0 localhost:3485
# test: in expr
select 1 in
{"code": 1, "msg": "IN <(> expected"}
select in
{"code": 1, "msg": "bad expression"}
select in true
{"code": 1, "msg": "bad expression"}
select 1 in true
{"code": 1, "msg": "IN <(> expected"}
select 1 in [
{"code": 1, "msg": "IN <(> expected"}
select 1 in (
{"code": 1, "msg": "bad expression"}
# test: in (empty set)
select 1 in ()
[false]
explain select 1 in ()
["
bytecode [coordinator]
--------
 0                bool        0      0      0
 1                 jmp        3      0      0
 2                 jmp        3      0      0
 3             cte_set        0      0      0
 4                body        0      0      0
 5                 ret        0      0      0

"]
# test: in
select 1 in (3, 1, 2)
[true]
select 1 in (1, 2, 3)
[true]
select 1 in (3, 2, 1)
[true]
select 1 in (1)
[true]
select 1 in (0)
[false]
# test: in (select)
select 1 in (select 1)
[true]
select 1 in (select 0)
[false]
select 1 in (select * from [1,2,3])
[true]
select 1 in (select * from [3,2,1])
[true]
select 0 in (select * from [3,2,1])
[false]
# test: in (select from table)
create shared table test (id int primary key)
[]
insert into test 1,2,3
[]
select 1 in (select * from test)
[false]
select 1 in (select id from test)
[true]
select 0 in (select id from test)
[false]
drop table test
[]
# test: in (cte)
with q as (select * from [1,2,3]) select 1 in (*) from q
[true, false, false]
with q as (select * from [1,2,3]) select * from q where * in (2,4)
[2]
# test: not in
select 1 not in (3, 1, 2)
[false]
select 1 not in (1, 2, 3)
[false]
select 1 not in (3, 2, 1)
[false]
select 1 not in (1)
[false]
select 1 not in (0)
[true]
select 1 not in (0,2,3)
[true]
# test: not in (select)
select 1 not in (select 1)
[false]
select 1 not in (select 0)
[true]
select 1 not in (select * from [1,2,3])
[false]
select 1 not in (select * from [3,2,1])
[false]
select 1 not in (select * from [3,2,4,0])
[true]
# test: not in (select from table)
create shared table test (id int primary key)
[]
insert into test 1,2,3
[]
select 1 not in (select * from test)
[true]
select 0 not in (select id from test)
[true]
drop table test
[]
# test: not in (cte)
with q as (select * from [1,2,3]) select 1 not in (*) from q
[false, true, true]
with q as (select * from [1,2,3]) select * from q where * not in (2,4)
[1, 3]
disconnect S0
close E0
