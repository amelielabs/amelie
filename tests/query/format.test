#

open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }];
connect E0 S0 127.0.0.1:3485;

# test: default format
show format;

# test: minimal
disconnect S0;
close E0;
open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }], "format": "minimal";
connect E0 S0 127.0.0.1:3485;

select 123;
select [1,2,3];
select {"id": 48};
select [{"id": 48}, {"id": 49}, [1,2,3]];
show all;
show uuid;

# test: minimal-pretty
disconnect S0;
close E0;
open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }], "format": "minimal-pretty";
connect E0 S0 127.0.0.1:3485;

select 123;
select [1,2,3];
select {"id": 48};
select [{"id": 48}, {"id": 49}, [1,2,3]];
show all;
show uuid;

# test: full
disconnect S0;
close E0;
open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }], "format": "full";
connect E0 S0 127.0.0.1:3485;

select 123;
select 123 as id;
select [1,2,3];
select {"id": 48} as json;
select [{"id": 48}, {"id": 49}, [1,2,3]];
show all;
show uuid;

# test: full-pretty
disconnect S0;
close E0;
open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }], "format": "full-pretty";
connect E0 S0 127.0.0.1:3485;

select 123;
select 123 as id;
select [1,2,3];
select {"id": 48} as json;
select [{"id": 48}, {"id": 49}, [1,2,3]];
show all;
show uuid;

# test: select format
disconnect S0;
close E0;
open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }];
connect E0 S0 127.0.0.1:3485;

# test: select format (duplicate columns)
option format full;
select 1 as id, 2 as id;

option format minimal;
select 1 as id, 2 as id;

# test: returning format
create table test (id int primary key);

option format full;
insert into test values (1) returning *;

option format full-pretty;
insert into test values (2) returning id;

option format minimal;
insert into test values (3) returning id;

select * from test;
drop table test;

disconnect S0;
close E0;
