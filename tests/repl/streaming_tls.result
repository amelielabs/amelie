open E0 "uuid": "00000000-0000-0000-0000-000000000000", "tls_cert": "./tls/server.crt", "tls_key": "./tls/server.key", "listen": [{ "host": "127.0.0.1", "port": 3480, "tls": true }], "backends": 3, "repl_reconnect_ms": 10;
connect E0 S0 https://127.0.0.1:3480 ./tls/ca.crt;
# test: create replica (backup using https)
backup E1 "https://127.0.0.1:3480";
close E1;
open E1 "uuid": "00000000-0000-0000-0000-000000000001", "tls_cert": "./tls/server.crt", "tls_key": "./tls/server.key", "listen": [{ "host": "127.0.0.1", "port": 3481, "tls": true }], "backends": 3;
connect E1 S1 https://127.0.0.1:3481 ./tls/ca.crt;
switch S1;
start repl;
subscribe "00000000-0000-0000-0000-000000000000";
switch S0;
create replica "00000000-0000-0000-0000-000000000001" "https://127.0.0.1:3481?tls_ca=./tls/ca.crt";
{"msg": "failed to parse uri"}
start repl;
# test: wait for primary connect
watch show('replica', "00000000-0000-0000-0000-000000000001").connected::bool = true;
