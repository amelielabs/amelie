#

start E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }]
connect E0 S0 localhost:3485

# test: alter table statement parsing
alter
alter table
alter table 123
alter table if
alter table if ex
alter table if exists
alter table if exists 123

# test: alter table if exists
alter table test rename test2
alter table if exists test rename test2

# test: alter table no command
create table test (id int primary key)
alter table test

# test: rename
alter table test rename
alter table test rename to
alter table test rename asf junk
alter table test rename to abc
select *.schema, *.name from system.tables()

# test: rename table exists
create table test (id int primary key)
alter table abc rename to test
drop table test

# test: rename conflicting view exists
create view test as select 1
alter table abc rename to test
drop view test

# test: rename schema not exists
alter table abc rename to test.test

# test: rename schema system
alter table abc rename to system.test

# test: rename schema
alter table abc rename to public.test
select *.schema, *.name from system.tables()
create schema test
alter table public.test rename to test.test
select *.schema, *.name from system.tables()
drop table test.test

# test: set serial
create table test (id int primary key serial, data int default 0)
insert into test () values ()
insert into test () values ()
insert into test () values ()
select * from test
alter table test set
alter table test set serial
alter table test set serial 123
alter table test set serial =
alter table test set serial to
alter table test set serial to "123"
alter table test set serial to 0
insert  into test () values ()
insert  into test () values ()
insert  into test () values ()
insert  into test () values ()
select * from test
alter table test set serial to 0
replace into test () values ()
replace into test () values ()
replace into test () values ()
select * from test
drop table test

# test: set serial if exists
alter table if exists test set serial to 0
alter table test set serial to 0

disconnect S0
stop E0
