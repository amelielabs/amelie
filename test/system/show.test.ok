open E0 "uuid": "00000000-0000-0000-0000-000000000000", "listen": [{ "host": "127.0.0.1", "port": 3485 }]
connect E0 S0 localhost:3485
# test: show statement parsing
show
{"code": 1, "msg": "SHOW <name> expected"}
show;
{"code": 1, "msg": "SHOW <name> expected"}
show all junk
{"code": 1, "msg": "unknown command: <junk>"}
show 1234
{"code": 1, "msg": "SHOW <name> expected"}
# test: show users
show users
[]
select system.users()
[]
# test: show schemas
show schemas
[{
  "name": "system",
  "system": true,
  "create": false
}, {
  "name": "public",
  "system": true,
  "create": true
}]
select system.schemas()
[{
  "name": "system",
  "system": true,
  "create": false
}, {
  "name": "public",
  "system": true,
  "create": true
}]
# test: show functions
show functions
[{
  "schema": "system",
  "name": "config",
  "argc": 0
}, {
  "schema": "system",
  "name": "users",
  "argc": 0
}, {
  "schema": "system",
  "name": "replicas",
  "argc": 0
}, {
  "schema": "system",
  "name": "repl",
  "argc": 0
}, {
  "schema": "system",
  "name": "replication",
  "argc": 0
}, {
  "schema": "system",
  "name": "nodes",
  "argc": 0
}, {
  "schema": "system",
  "name": "schemas",
  "argc": 0
}, {
  "schema": "system",
  "name": "functions",
  "argc": 0
}, {
  "schema": "system",
  "name": "tables",
  "argc": 0
}, {
  "schema": "system",
  "name": "views",
  "argc": 0
}, {
  "schema": "system",
  "name": "wal",
  "argc": 0
}, {
  "schema": "public",
  "name": "string",
  "argc": 1
}, {
  "schema": "public",
  "name": "int",
  "argc": 1
}, {
  "schema": "public",
  "name": "bool",
  "argc": 1
}, {
  "schema": "public",
  "name": "real",
  "argc": 1
}, {
  "schema": "public",
  "name": "json",
  "argc": 1
}, {
  "schema": "public",
  "name": "interval",
  "argc": 1
}, {
  "schema": "public",
  "name": "timestamp",
  "argc": 0
}, {
  "schema": "public",
  "name": "coalesce",
  "argc": 0
}, {
  "schema": "public",
  "name": "nullif",
  "argc": 2
}, {
  "schema": "public",
  "name": "append",
  "argc": 2
}, {
  "schema": "public",
  "name": "push_back",
  "argc": 2
}, {
  "schema": "public",
  "name": "push",
  "argc": 2
}, {
  "schema": "public",
  "name": "pop",
  "argc": 1
}, {
  "schema": "public",
  "name": "pop_back",
  "argc": 1
}, {
  "schema": "public",
  "name": "put",
  "argc": 3
}, {
  "schema": "public",
  "name": "remove",
  "argc": 2
}, {
  "schema": "public",
  "name": "set",
  "argc": 3
}, {
  "schema": "public",
  "name": "unset",
  "argc": 2
}, {
  "schema": "public",
  "name": "has",
  "argc": 2
}, {
  "schema": "public",
  "name": "length",
  "argc": 1
}, {
  "schema": "public",
  "name": "size",
  "argc": 1
}, {
  "schema": "public",
  "name": "concat",
  "argc": 0
}, {
  "schema": "public",
  "name": "lower",
  "argc": 1
}, {
  "schema": "public",
  "name": "upper",
  "argc": 1
}, {
  "schema": "public",
  "name": "substr",
  "argc": 0
}, {
  "schema": "public",
  "name": "strpos",
  "argc": 2
}, {
  "schema": "public",
  "name": "replace",
  "argc": 3
}, {
  "schema": "public",
  "name": "ltrim",
  "argc": 0
}, {
  "schema": "public",
  "name": "rtrim",
  "argc": 0
}, {
  "schema": "public",
  "name": "trim",
  "argc": 0
}, {
  "schema": "public",
  "name": "greatest",
  "argc": 0
}, {
  "schema": "public",
  "name": "least",
  "argc": 0
}, {
  "schema": "public",
  "name": "abs",
  "argc": 1
}, {
  "schema": "public",
  "name": "round",
  "argc": 1
}, {
  "schema": "public",
  "name": "sign",
  "argc": 1
}, {
  "schema": "public",
  "name": "ceil",
  "argc": 1
}, {
  "schema": "public",
  "name": "exp",
  "argc": 1
}, {
  "schema": "public",
  "name": "floor",
  "argc": 1
}, {
  "schema": "public",
  "name": "mod",
  "argc": 2
}, {
  "schema": "public",
  "name": "power",
  "argc": 2
}, {
  "schema": "public",
  "name": "trunc",
  "argc": 1
}, {
  "schema": "public",
  "name": "pi",
  "argc": 0
}, {
  "schema": "public",
  "name": "sqrt",
  "argc": 1
}, {
  "schema": "public",
  "name": "acos",
  "argc": 1
}, {
  "schema": "public",
  "name": "acosh",
  "argc": 1
}, {
  "schema": "public",
  "name": "asin",
  "argc": 1
}, {
  "schema": "public",
  "name": "asinh",
  "argc": 1
}, {
  "schema": "public",
  "name": "atan",
  "argc": 1
}, {
  "schema": "public",
  "name": "atanh",
  "argc": 1
}, {
  "schema": "public",
  "name": "atan2",
  "argc": 2
}, {
  "schema": "public",
  "name": "cos",
  "argc": 1
}, {
  "schema": "public",
  "name": "cosh",
  "argc": 1
}, {
  "schema": "public",
  "name": "sin",
  "argc": 1
}, {
  "schema": "public",
  "name": "sinh",
  "argc": 1
}, {
  "schema": "public",
  "name": "tan",
  "argc": 1
}, {
  "schema": "public",
  "name": "tanh",
  "argc": 1
}, {
  "schema": "public",
  "name": "ln",
  "argc": 1
}, {
  "schema": "public",
  "name": "log",
  "argc": 1
}, {
  "schema": "public",
  "name": "log10",
  "argc": 1
}, {
  "schema": "public",
  "name": "log2",
  "argc": 1
}, {
  "schema": "public",
  "name": "error",
  "argc": 1
}, {
  "schema": "public",
  "name": "type",
  "argc": 1
}, {
  "schema": "public",
  "name": "random",
  "argc": 0
}, {
  "schema": "public",
  "name": "random_uuid",
  "argc": 0
}, {
  "schema": "public",
  "name": "md5",
  "argc": 1
}, {
  "schema": "public",
  "name": "sha1",
  "argc": 1
}, {
  "schema": "public",
  "name": "now",
  "argc": 0
}, {
  "schema": "public",
  "name": "at_timezone",
  "argc": 2
}, {
  "schema": "public",
  "name": "generate_series",
  "argc": 3
}, {
  "schema": "public",
  "name": "date_bin",
  "argc": 0
}, {
  "schema": "public",
  "name": "date_trunc",
  "argc": 0
}, {
  "schema": "public",
  "name": "extract",
  "argc": 0
}]
select system.functions()
[{
  "schema": "system",
  "name": "config",
  "argc": 0
}, {
  "schema": "system",
  "name": "users",
  "argc": 0
}, {
  "schema": "system",
  "name": "replicas",
  "argc": 0
}, {
  "schema": "system",
  "name": "repl",
  "argc": 0
}, {
  "schema": "system",
  "name": "replication",
  "argc": 0
}, {
  "schema": "system",
  "name": "nodes",
  "argc": 0
}, {
  "schema": "system",
  "name": "schemas",
  "argc": 0
}, {
  "schema": "system",
  "name": "functions",
  "argc": 0
}, {
  "schema": "system",
  "name": "tables",
  "argc": 0
}, {
  "schema": "system",
  "name": "views",
  "argc": 0
}, {
  "schema": "system",
  "name": "wal",
  "argc": 0
}, {
  "schema": "public",
  "name": "string",
  "argc": 1
}, {
  "schema": "public",
  "name": "int",
  "argc": 1
}, {
  "schema": "public",
  "name": "bool",
  "argc": 1
}, {
  "schema": "public",
  "name": "real",
  "argc": 1
}, {
  "schema": "public",
  "name": "json",
  "argc": 1
}, {
  "schema": "public",
  "name": "interval",
  "argc": 1
}, {
  "schema": "public",
  "name": "timestamp",
  "argc": 0
}, {
  "schema": "public",
  "name": "coalesce",
  "argc": 0
}, {
  "schema": "public",
  "name": "nullif",
  "argc": 2
}, {
  "schema": "public",
  "name": "append",
  "argc": 2
}, {
  "schema": "public",
  "name": "push_back",
  "argc": 2
}, {
  "schema": "public",
  "name": "push",
  "argc": 2
}, {
  "schema": "public",
  "name": "pop",
  "argc": 1
}, {
  "schema": "public",
  "name": "pop_back",
  "argc": 1
}, {
  "schema": "public",
  "name": "put",
  "argc": 3
}, {
  "schema": "public",
  "name": "remove",
  "argc": 2
}, {
  "schema": "public",
  "name": "set",
  "argc": 3
}, {
  "schema": "public",
  "name": "unset",
  "argc": 2
}, {
  "schema": "public",
  "name": "has",
  "argc": 2
}, {
  "schema": "public",
  "name": "length",
  "argc": 1
}, {
  "schema": "public",
  "name": "size",
  "argc": 1
}, {
  "schema": "public",
  "name": "concat",
  "argc": 0
}, {
  "schema": "public",
  "name": "lower",
  "argc": 1
}, {
  "schema": "public",
  "name": "upper",
  "argc": 1
}, {
  "schema": "public",
  "name": "substr",
  "argc": 0
}, {
  "schema": "public",
  "name": "strpos",
  "argc": 2
}, {
  "schema": "public",
  "name": "replace",
  "argc": 3
}, {
  "schema": "public",
  "name": "ltrim",
  "argc": 0
}, {
  "schema": "public",
  "name": "rtrim",
  "argc": 0
}, {
  "schema": "public",
  "name": "trim",
  "argc": 0
}, {
  "schema": "public",
  "name": "greatest",
  "argc": 0
}, {
  "schema": "public",
  "name": "least",
  "argc": 0
}, {
  "schema": "public",
  "name": "abs",
  "argc": 1
}, {
  "schema": "public",
  "name": "round",
  "argc": 1
}, {
  "schema": "public",
  "name": "sign",
  "argc": 1
}, {
  "schema": "public",
  "name": "ceil",
  "argc": 1
}, {
  "schema": "public",
  "name": "exp",
  "argc": 1
}, {
  "schema": "public",
  "name": "floor",
  "argc": 1
}, {
  "schema": "public",
  "name": "mod",
  "argc": 2
}, {
  "schema": "public",
  "name": "power",
  "argc": 2
}, {
  "schema": "public",
  "name": "trunc",
  "argc": 1
}, {
  "schema": "public",
  "name": "pi",
  "argc": 0
}, {
  "schema": "public",
  "name": "sqrt",
  "argc": 1
}, {
  "schema": "public",
  "name": "acos",
  "argc": 1
}, {
  "schema": "public",
  "name": "acosh",
  "argc": 1
}, {
  "schema": "public",
  "name": "asin",
  "argc": 1
}, {
  "schema": "public",
  "name": "asinh",
  "argc": 1
}, {
  "schema": "public",
  "name": "atan",
  "argc": 1
}, {
  "schema": "public",
  "name": "atanh",
  "argc": 1
}, {
  "schema": "public",
  "name": "atan2",
  "argc": 2
}, {
  "schema": "public",
  "name": "cos",
  "argc": 1
}, {
  "schema": "public",
  "name": "cosh",
  "argc": 1
}, {
  "schema": "public",
  "name": "sin",
  "argc": 1
}, {
  "schema": "public",
  "name": "sinh",
  "argc": 1
}, {
  "schema": "public",
  "name": "tan",
  "argc": 1
}, {
  "schema": "public",
  "name": "tanh",
  "argc": 1
}, {
  "schema": "public",
  "name": "ln",
  "argc": 1
}, {
  "schema": "public",
  "name": "log",
  "argc": 1
}, {
  "schema": "public",
  "name": "log10",
  "argc": 1
}, {
  "schema": "public",
  "name": "log2",
  "argc": 1
}, {
  "schema": "public",
  "name": "error",
  "argc": 1
}, {
  "schema": "public",
  "name": "type",
  "argc": 1
}, {
  "schema": "public",
  "name": "random",
  "argc": 0
}, {
  "schema": "public",
  "name": "random_uuid",
  "argc": 0
}, {
  "schema": "public",
  "name": "md5",
  "argc": 1
}, {
  "schema": "public",
  "name": "sha1",
  "argc": 1
}, {
  "schema": "public",
  "name": "now",
  "argc": 0
}, {
  "schema": "public",
  "name": "at_timezone",
  "argc": 2
}, {
  "schema": "public",
  "name": "generate_series",
  "argc": 3
}, {
  "schema": "public",
  "name": "date_bin",
  "argc": 0
}, {
  "schema": "public",
  "name": "date_trunc",
  "argc": 0
}, {
  "schema": "public",
  "name": "extract",
  "argc": 0
}]
# test: show tables
show tables
[]
select system.tables()
[]
# test: show views
show views
[]
select system.views()
[]
# test: show wal
show wal
{
  "active": true,
  "rotate_wm": 104857600,
  "sync_on_rotate": false,
  "sync_on_write": false,
  "lsn": 0,
  "lsn_min": 1,
  "files": 1,
  "slots": 0,
  "slots_min": -1
}
select system.wal()
{
  "active": true,
  "rotate_wm": 104857600,
  "sync_on_rotate": false,
  "sync_on_write": false,
  "lsn": 0,
  "lsn_min": 1,
  "files": 1,
  "slots": 0,
  "slots_min": -1
}
# test: show all
show all
{
  "version": "0.0",
  "uuid": "00000000-0000-0000-0000-000000000000",
  "directory": "_output/E0",
  "timezone": "UTC",
  "timezone_default": "UTC",
  "log_enable": true,
  "log_to_file": true,
  "log_to_stdout": false,
  "log_connections": true,
  "log_query": false,
  "tls_cert": "",
  "tls_key": "",
  "tls_ca": "",
  "listen": [{
    "host": "127.0.0.1",
    "port": 3485
  }],
  "frontends": 1,
  "shards": 1,
  "wal": true,
  "wal_rotate_wm": 104857600,
  "wal_sync_on_rotate": false,
  "wal_sync_on_write": false,
  "repl": false,
  "repl_primary": "",
  "repl_reconnect_ms": 3000,
  "read_only": false,
  "lsn": 0,
  "psn": 0,
  "checkpoint": 0
}
select system.config()
{
  "version": "0.0",
  "uuid": "00000000-0000-0000-0000-000000000000",
  "directory": "_output/E0",
  "timezone": "UTC",
  "timezone_default": "UTC",
  "log_enable": true,
  "log_to_file": true,
  "log_to_stdout": false,
  "log_connections": true,
  "log_query": false,
  "tls_cert": "",
  "tls_key": "",
  "tls_ca": "",
  "listen": [{
    "host": "127.0.0.1",
    "port": 3485
  }],
  "frontends": 1,
  "shards": 1,
  "wal": true,
  "wal_rotate_wm": 104857600,
  "wal_sync_on_rotate": false,
  "wal_sync_on_write": false,
  "repl": false,
  "repl_primary": "",
  "repl_reconnect_ms": 3000,
  "read_only": false,
  "lsn": 0,
  "psn": 0,
  "checkpoint": 0
}
select system.config().directory
"_output/E0"
select system.config()["directory"]
"_output/E0"
select system.config(123)
{"code": 1, "msg": "config(): incorrect number of arguments"}
# test: show name
show log_enable
true
show "log_enable"
{"code": 1, "msg": "SHOW <name> expected"}
disconnect S0
close E0
