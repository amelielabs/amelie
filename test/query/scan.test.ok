env_open E0
connect E0 S0
connect: on_connect
# test: scan key column
create table test (id int primary key, data int default 1)
insert into test (id) values (1), (2), (3)
explain select * from test where id > 1
"
bytecode [coordinator]
--------
 0                recv        0      0      0
 1                 ret        0      0      0


bytecode [shard 0]
--------
 0                 int        0      1      0
 1                push        0      0      0
 2         cursor_open        0      0      4      # public.test (primary)
 3                 jmp       11      0      0
 4          cursor_idx        0      0      0
 5                 int        1      1      0
 6                  gt        2      0      1
 7                jntr       10      2      0
 8         cursor_read        0      0      0
 9                send        0      0      0
10         cursor_next        0      4      0
11        cursor_close        0      0      0
12                 ret        0      0      0

"
select * from test where id > 1
[2, 1]
[3, 1]
explain select * from test where id >= 1
"
bytecode [coordinator]
--------
 0                recv        0      0      0
 1                 ret        0      0      0


bytecode [shard 0]
--------
 0                 int        0      1      0
 1                push        0      0      0
 2         cursor_open        0      0      4      # public.test (primary)
 3                 jmp       11      0      0
 4          cursor_idx        0      0      0
 5                 int        1      1      0
 6                 gte        2      0      1
 7                jntr       10      2      0
 8         cursor_read        0      0      0
 9                send        0      0      0
10         cursor_next        0      4      0
11        cursor_close        0      0      0
12                 ret        0      0      0

"
select * from test where id >= 1
[1, 1]
[2, 1]
[3, 1]
drop table test
# test: scan key column.path
create table test (obj object, primary key(obj.id int))
insert into test {"id": 1}
insert into test {"id": 2}
insert into test {"id": 3}
explain select * from test where obj.id > 1
"
bytecode [coordinator]
--------
 0                recv        0      0      0
 1                 ret        0      0      0


bytecode [shard 0]
--------
 0                 int        0      1      0
 1                push        0      0      0
 2         cursor_open        0      0      4      # public.test (primary)
 3                 jmp       11      0      0
 4          cursor_idx        0      0      0      # id
 5                 int        1      1      0
 6                  gt        2      0      1
 7                jntr       10      2      0
 8         cursor_read        0      0      0
 9                send        0      0      0
10         cursor_next        0      4      0
11        cursor_close        0      0      0
12                 ret        0      0      0

"
select * from test where obj.id > 1
[{"id": 2}]
[{"id": 3}]
drop table test
# test: scan key column.path.path
create table test (obj object, primary key(obj.data.id int))
insert into test {"data": {"id": 1}}
insert into test {"data": {"id": 2}}
insert into test {"data": {"id": 3}}
explain select * from test where obj.data.id > 1
"
bytecode [coordinator]
--------
 0                recv        0      0      0
 1                 ret        0      0      0


bytecode [shard 0]
--------
 0                 int        0      1      0
 1                push        0      0      0
 2         cursor_open        0      0      4      # public.test (primary)
 3                 jmp       11      0      0
 4          cursor_idx        0      0      0      # data.id
 5                 int        1      1      0
 6                  gt        2      0      1
 7                jntr       10      2      0
 8         cursor_read        0      0      0
 9                send        0      0      0
10         cursor_next        0      4      0
11        cursor_close        0      0      0
12                 ret        0      0      0

"
select * from test where obj.data.id > 1
[{"data": {"id": 2}}]
[{"data": {"id": 3}}]
drop table test
# test: scan key target.column
create table test (id int primary key, data int default 1)
insert into test (id) values (1), (2), (3)
explain select * from test where test.id > 1
"
bytecode [coordinator]
--------
 0                recv        0      0      0
 1                 ret        0      0      0


bytecode [shard 0]
--------
 0                 int        0      1      0
 1                push        0      0      0
 2         cursor_open        0      0      4      # public.test (primary)
 3                 jmp       11      0      0
 4          cursor_idx        0      0      0
 5                 int        1      1      0
 6                  gt        2      0      1
 7                jntr       10      2      0
 8         cursor_read        0      0      0
 9                send        0      0      0
10         cursor_next        0      4      0
11        cursor_close        0      0      0
12                 ret        0      0      0

"
select * from test where test.id > 1
[2, 1]
[3, 1]
drop table test
# test: scan key target.column.path
create table test (obj object, primary key(obj.id int))
insert into test {"id": 1}
insert into test {"id": 2}
insert into test {"id": 3}
explain select * from test where test.obj.id > 1
"
bytecode [coordinator]
--------
 0                recv        0      0      0
 1                 ret        0      0      0


bytecode [shard 0]
--------
 0                 int        0      1      0
 1                push        0      0      0
 2         cursor_open        0      0      4      # public.test (primary)
 3                 jmp       11      0      0
 4          cursor_idx        0      0      0      # id
 5                 int        1      1      0
 6                  gt        2      0      1
 7                jntr       10      2      0
 8         cursor_read        0      0      0
 9                send        0      0      0
10         cursor_next        0      4      0
11        cursor_close        0      0      0
12                 ret        0      0      0

"
select * from test where test.obj.id > 1
[{"id": 2}]
[{"id": 3}]
drop table test
# test: scan key target.column.path.path
create table test (obj object, primary key(obj.data.id int))
insert into test {"data": {"id": 1}}
insert into test {"data": {"id": 2}}
insert into test {"data": {"id": 3}}
explain select * from test where test.obj.data.id > 1
"
bytecode [coordinator]
--------
 0                recv        0      0      0
 1                 ret        0      0      0


bytecode [shard 0]
--------
 0                 int        0      1      0
 1                push        0      0      0
 2         cursor_open        0      0      4      # public.test (primary)
 3                 jmp       11      0      0
 4          cursor_idx        0      0      0      # data.id
 5                 int        1      1      0
 6                  gt        2      0      1
 7                jntr       10      2      0
 8         cursor_read        0      0      0
 9                send        0      0      0
10         cursor_next        0      4      0
11        cursor_close        0      0      0
12                 ret        0      0      0

"
select * from test where test.obj.data.id > 1
[{"data": {"id": 2}}]
[{"data": {"id": 3}}]
drop table test
# test: scan key alias.column
create table test (id int primary key, data int default 1)
insert into test (id) values (1), (2), (3)
explain select * from test alias where alias.id > 1
"
bytecode [coordinator]
--------
 0                recv        0      0      0
 1                 ret        0      0      0


bytecode [shard 0]
--------
 0                 int        0      1      0
 1                push        0      0      0
 2         cursor_open        0      0      4      # public.test (primary)
 3                 jmp       11      0      0
 4          cursor_idx        0      0      0
 5                 int        1      1      0
 6                  gt        2      0      1
 7                jntr       10      2      0
 8         cursor_read        0      0      0
 9                send        0      0      0
10         cursor_next        0      4      0
11        cursor_close        0      0      0
12                 ret        0      0      0

"
select * from test alias where alias.id > 1
[2, 1]
[3, 1]
drop table test
# test: scan key alias.column.path
create table test (obj object, primary key(obj.id int))
insert into test {"id": 1}
insert into test {"id": 2}
insert into test {"id": 3}
explain select * from test alias where alias.obj.id > 1
"
bytecode [coordinator]
--------
 0                recv        0      0      0
 1                 ret        0      0      0


bytecode [shard 0]
--------
 0                 int        0      1      0
 1                push        0      0      0
 2         cursor_open        0      0      4      # public.test (primary)
 3                 jmp       11      0      0
 4          cursor_idx        0      0      0      # id
 5                 int        1      1      0
 6                  gt        2      0      1
 7                jntr       10      2      0
 8         cursor_read        0      0      0
 9                send        0      0      0
10         cursor_next        0      4      0
11        cursor_close        0      0      0
12                 ret        0      0      0

"
select * from test alias where alias.obj.id > 1
[{"id": 2}]
[{"id": 3}]
drop table test
# test: scan key alias.column.path.path
create table test (obj object, primary key(obj.data.id int))
insert into test {"data": {"id": 1}}
insert into test {"data": {"id": 2}}
insert into test {"data": {"id": 3}}
explain select * from test alias where alias.obj.data.id > 1
"
bytecode [coordinator]
--------
 0                recv        0      0      0
 1                 ret        0      0      0


bytecode [shard 0]
--------
 0                 int        0      1      0
 1                push        0      0      0
 2         cursor_open        0      0      4      # public.test (primary)
 3                 jmp       11      0      0
 4          cursor_idx        0      0      0      # data.id
 5                 int        1      1      0
 6                  gt        2      0      1
 7                jntr       10      2      0
 8         cursor_read        0      0      0
 9                send        0      0      0
10         cursor_next        0      4      0
11        cursor_close        0      0      0
12                 ret        0      0      0

"
select * from test alias where alias.obj.data.id > 1
[{"data": {"id": 2}}]
[{"data": {"id": 3}}]
drop table test
disconnect S0
env_close E0
